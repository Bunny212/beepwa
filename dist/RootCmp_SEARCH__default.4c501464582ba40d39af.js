/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~10.0.0, @magento/venia-sample-payments-checkmo: ^0.0.12, @magento/upward-security-headers: ^1.0.14, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ^11.4.1, @magento/peregrine: ~13.0.0, @magento/pagebuilder: ~8.0.0, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.2, @apollo/client: ~3.5.0 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"0Ip5":function(e,t,a){"use strict"
var n=a("JPst"),r=a.n(n)()(function(e){return e[1]})
r.push([e.i,".searchPage-root-z9X {\n}\n\n.searchPage-noResult-u1x {\n}\n\n.searchPage-headerButtons-Gt1 {\n    flex-basis: 100%;\n}\n\n.searchPage-heading-K4n {\n}\n\n.searchPage-searchContent-6z0 {\n}\n\n.searchPage-searchInfo-GU7 {\n}\n\n@media (min-width: 960px) {\n    .searchPage-searchInfo-GU7 {\n        flex-basis: 100%;\n    }\n}\n\n.searchPage-totalPages-TJ1 {\n}\n\n.searchPage-headingHighlight-BYR {\n}\n\n.searchPage-sidebar-oT7 {\n}\n",""]),r.locals={root:"searchPage-root-z9X p-xs lg_flex lg_flex-nowrap",noResult:"searchPage-noResult-u1x flex",headerButtons:"searchPage-headerButtons-Gt1 flex justify-center mx-0 my-xs lg_justify-end",heading:"searchPage-heading-K4n flex flex-wrap justify-center lg_flex-nowrap lg_items-center lg_justify-between",searchContent:"searchPage-searchContent-6z0 lg_flex-grow",searchInfo:"searchPage-searchInfo-GU7 leading-tight max-w-[75vw] mb-xs ml-0 mr-0 mt-10 lg_m-0",totalPages:"searchPage-totalPages-TJ1 ml-2xs",headingHighlight:"searchPage-headingHighlight-BYR font-bold",sidebar:"searchPage-sidebar-oT7 hidden lg_flex lg_self-start lg_pt-16 lg_w-filterSidebarWidth"},t.a=r},N6ZK:function(e,t,a){"use strict"
a.r(t),a.d(t,"default",function(){return Z})
var n,r,l,s,c,i=a("q1tI"),o=a.n(i),u=a("dDsW"),g=a("kriW"),h=a("17x9"),m=a("+TN3"),d=a("Lm/n"),p=a("Ty5D"),f=a("tvce"),b=a("y1Xp"),P=a("OlZo"),y=a("Cszt"),E=a("PKba"),S=a("IOPv"),v=a("Unmo"),j=a("+wQL"),_=a("VkAN"),O=a.n(_),x=a("UYTu"),w=Object(x.a)(n||(n=O()(["\n    query getPageSize {\n        # eslint-disable-next-line @graphql-eslint/require-id-when-available\n        storeConfig {\n            store_code\n            grid_per_page\n        }\n    }\n"]))),N=Object(x.a)(r||(r=O()(["\n    query getProductFiltersBySearch($search: String!) {\n        products(search: $search) {\n            aggregations {\n                label\n                count\n                attribute_code\n                options {\n                    label\n                    value\n                }\n                position\n            }\n        }\n    }\n"]))),R=Object(x.a)(l||(l=O()(["\n    query ProductSearch(\n        $currentPage: Int = 1\n        $inputText: String!\n        $pageSize: Int = 6\n        $filters: ProductAttributeFilterInput!\n        $sort: ProductAttributeSortInput\n    ) {\n        products(\n            currentPage: $currentPage\n            pageSize: $pageSize\n            search: $inputText\n            filter: $filters\n            sort: $sort\n        ) {\n            items {\n                id\n                uid\n                name\n                price_range {\n                    maximum_price {\n                        final_price {\n                            currency\n                            value\n                        }\n                        regular_price {\n                            currency\n                            value\n                        }\n                        discount {\n                            amount_off\n                        }\n                    }\n                }\n                sku\n                small_image {\n                    url\n                }\n                stock_status\n                __typename\n                url_key\n            }\n            page_info {\n                total_pages\n            }\n            total_count\n        }\n    }\n"]))),T={getFilterInputsQuery:Object(x.a)(s||(s=O()(['\n    query GetFilterInputsForSearch {\n        __type(name: "ProductAttributeFilterInput") {\n            inputFields {\n                name\n                type {\n                    name\n                }\n            }\n        }\n    }\n']))),getPageSize:w,getProductFiltersBySearchQuery:N,getSearchAvailableSortMethods:Object(x.a)(c||(c=O()(["\n    query getSearchAvailableSortMethods($search: String!) {\n        products(search: $search) {\n            sort_fields {\n                options {\n                    label\n                    value\n                }\n            }\n        }\n    }\n"]))),productSearchQuery:R},z=a("Cess"),C=a("C0us"),F=a("rP9t"),I=a("vh/y"),M=a("tuiD"),k=a("JCOj"),$=a("LboF"),A=a.n($),q=a("0Ip5"),B={injectType:"singletonStyleTag",insert:"head",singleton:!0},U=(A()(q.a,B),q.a.locals||{}),D=a("Y5d+"),L=a("hbEb"),Q=a("pezu"),G=a("RL9Z"),H=a("LlM3"),J=a("zrp3"),K=a("UPvi"),Y=o.a.lazy(()=>Promise.all([a.e(0),a.e(10),a.e(25)]).then(a.bind(null,"dzHx"))),W=o.a.lazy(()=>Promise.all([a.e(0),a.e(10),a.e(28)]).then(a.bind(null,"SAkj"))),X=e=>{var t=Object(b.a)(U,e.classes),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[,{dispatch:t}]=Object(z.b)(),a=Object(b.a)(T,e.operations),{currentStoreName:n}=Object(f.a)(),{getFilterInputsQuery:r,getPageSize:l,getProductFiltersBySearchQuery:s,getSearchAvailableSortMethods:c,productSearchQuery:o}=a,{data:u}=Object(m.a)(l,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),[g,{data:h}]=Object(d.a)(c,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),_=u&&u.storeConfig.grid_per_page,O=Object(v.a)({sortFromSearch:!0}),[x]=O,{sortAttribute:w,sortDirection:N}=x,R=Object(i.useRef)(x),C=Object(p.h)(),{search:F}=C,I=Object(i.useRef)(F),[M,k]=Object(y.a)(),{currentPage:$,totalPages:A}=M,{setCurrentPage:q,setTotalPages:B}=k,[,U]=Object(P.b)(),{toggleDrawer:D,actions:{setPageLoading:L}}=U,Q=Object(S.a)("query",C),G=Object(i.useMemo)(()=>{var e=Object(j.c)(F)
if(0===e.size)return null
var t=e.get("category_id")
return t?[...t].map(e=>e.split(",")[0]).join(", "):null},[F]),H=Object(i.useCallback)(()=>{D("filter")},[D]),{called:J,data:K,loading:Y}=Object(m.a)(r),W=Object(i.useMemo)(()=>{var e=new Map
return K&&K.__type.inputFields.forEach(t=>{var{name:a,type:n}=t
e.set(a,n.name)}),e},[K]),X={currentPage:$,setPage:q,totalPages:A},[Z,{called:V,loading:ee,error:te,data:ae}]=Object(d.a)(o,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),ne=!!ae&&ee
Object(i.useEffect)(()=>{L(ne)},[ne,L])
var re=Object(i.useRef)(!1)
Object(i.useEffect)(()=>{var e=new URLSearchParams(I.current),t=new URLSearchParams(F)
e.delete("page"),t.delete("page"),e.toString()===t.toString()&&R.current.sortAttribute.toString()===x.sortAttribute.toString()&&R.current.sortDirection.toString()===x.sortDirection.toString()||(q(1,!0),I.current=F,R.current=x,re.current=!1)},[x,F,q]),Object(i.useEffect)(()=>{if(W.size&&_){var e=Object(j.c)(F),a={},n=[]
e.forEach((e,t)=>{var r=W.get(t)
a[t]=Object(j.b)(e,r),n.push({attribute:t,value:e,isRange:"FilterRangeTypeInput"===r})}),Z({variables:{currentPage:Number($),filters:a,inputText:Q,pageSize:Number(_),sort:{[w]:N}}}),re.current||(t({type:"SEARCH_REQUEST",payload:{query:Q,refinements:n,sort:{attribute:w,order:N},pageSize:Number(_),currentPage:Number($)}}),re.current=!0)}},[$,W,Q,Z,_,F,N,w,t]),Object(i.useEffect)(()=>{var e=ae?ae.products.page_info.total_pages:null
return B(e),()=>{B(null)}},[ae,B]),Object(i.useEffect)(()=>{Q&&g({variables:{search:Q}})},[Q,g])
var[le,{data:se}]=Object(d.a)(s,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"})
Object(i.useEffect)(()=>{Q&&le({variables:{search:Q}})},[le,Q,F])
var ce=se?se.products.aggregations:null,ie=J&&!V||ee||Y
return Object(E.a)($),{availableSortMethods:h?h.products.sort_fields.options:null,data:ae,error:te,filters:ce,loading:ie,openDrawer:H,pageControl:X,searchCategory:G,searchTerm:Q,sortProps:O,currentStoreName:n}}(),{availableSortMethods:n,data:r,error:l,filters:s,loading:c,pageControl:h,searchCategory:_,searchTerm:O,sortProps:x,currentStoreName:w}=a,{formatMessage:N}=Object(u.a)(),[R]=x,$="".concat(w,"'s Search Result for term ").concat(O),A=Object(i.useMemo)(()=>!r&&c?o.a.createElement(i.Fragment,null,o.a.createElement("section",{className:t.gallery},o.a.createElement(F.a,{items:Array.from({length:12}).fill(null)})),o.a.createElement("section",{className:t.pagination})):!r&&l?o.a.createElement("div",{"aria-live":"polite",className:t.noResult},o.a.createElement(g.a,{id:"searchPage.noResult",defaultMessage:"No results found. The search term may be missing or invalid."})):r?0===r.products.items.length?o.a.createElement("div",{"aria-live":"polite",className:t.noResult},o.a.createElement(g.a,{id:"searchPage.noResultImportant",defaultMessage:"No results found!"})):o.a.createElement(i.Fragment,null,o.a.createElement("section",{className:t.gallery},o.a.createElement(I.a,{items:r.products.items})),o.a.createElement("section",{className:t.pagination},o.a.createElement(C.a,{pageControl:h}))):null,[t.gallery,t.noResult,t.pagination,l,c,r,h]),q=r&&r.products&&r.products.total_count?r.products.total_count:0,B=s&&s.length,X=null===s,Z=q&&n,V=!q&&c,ee=B?o.a.createElement(Q.a,{filters:s}):X?o.a.createElement(G.a,null):null,te=B?o.a.createElement(Y,{filters:s}):null,ae=B?o.a.createElement(W,{filters:s}):X?o.a.createElement(H.a,null):null,ne=Z?n&&o.a.createElement(M.a,{sortProps:x,availableSortMethods:n}):V?o.a.createElement(k.a,null):null,re=Z?o.a.createElement(D.a,{currentSort:R}):V?o.a.createElement(L.a,null):null,le=c?o.a.createElement(J.a,{width:5}):r?O?o.a.createElement(g.a,{id:"searchPage.searchTerm",values:{highlight:e=>o.a.createElement("span",{className:t.headingHighlight},e),category:_,term:O},defaultMessage:"Showing results for <highlight>{term}</highlight>{category, select, null {} other { in <highlight>{category}</highlight>}}:"}):o.a.createElement(g.a,{id:"searchPage.searchTermEmpty",defaultMessage:"Showing all results:"}):null,se=r&&!c?o.a.createElement("span",{"aria-live":"polite",className:t.totalPages},N({id:"searchPage.totalPages",defaultMessage:"{totalCount} items"},{totalCount:q})):c?o.a.createElement(J.a,{width:5}):null,ce=[O,"".concat("English"," Search")].filter(Boolean).join(" - ")
return o.a.createElement("article",{className:t.root},o.a.createElement("div",{className:t.sidebar},o.a.createElement(i.Suspense,{fallback:o.a.createElement(H.a,null)},ae)),o.a.createElement("div",{className:t.searchContent},o.a.createElement("div",{className:t.heading},o.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:t.searchInfo},le,se),o.a.createElement("div",{className:t.headerButtons},ee,ne),re),A,o.a.createElement(i.Suspense,{fallback:null},te)),o.a.createElement(K.c,null,$),o.a.createElement(K.a,{name:"title",content:$}),o.a.createElement(K.a,{name:"description",content:ce}))},Z=X
X.propTypes={classes:Object(h.shape)({noResult:h.string,root:h.string,totalPages:h.string})}}}])
